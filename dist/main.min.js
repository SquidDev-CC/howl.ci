var t={};(function(t){t.Template=function(t,e,n,r){t=t||{};this.r=t.code||this.r;this.c=n;this.options=r||{};this.text=e||"";this.partials=t.partials||{};this.subs=t.subs||{};this.buf=""};t.Template.prototype={r:function(t,e,n){return""},v:l,t:u,render:function t(e,n,r){return this.ri([e],n||{},r)},ri:function(t,e,n){return this.r(t,e,n)},ep:function(t,e){var r=this.partials[t];var i=e[r.name];if(r.instance&&r.base==i){return r.instance}if(typeof i=="string"){if(!this.c){throw new Error("No compiler available.")}i=this.c.compile(i,this.options)}if(!i){return null}this.partials[t].base=i;if(r.subs){if(!e.stackText)e.stackText={};for(key in r.subs){if(!e.stackText[key]){e.stackText[key]=this.activeSub!==undefined&&e.stackText[this.activeSub]?e.stackText[this.activeSub]:this.text}}i=n(i,r.subs,r.partials,this.stackSubs,this.stackPartials,e.stackText)}this.partials[t].instance=i;return i},rp:function(t,e,n,r){var i=this.ep(t,n);if(!i){return""}return i.ri(e,n,r)},rs:function(t,e,n){var r=t[t.length-1];if(!b(r)){n(t,e,this);return}for(var i=0;i<r.length;i++){t.push(r[i]);n(t,e,this);t.pop()}},s:function(t,e,n,r,i,s,a){var o;if(b(t)&&t.length===0){return false}if(typeof t=="function"){t=this.ms(t,e,n,r,i,s,a)}o=!!t;if(!r&&o&&e){e.push(typeof t=="object"?t:e[e.length-1])}return o},d:function(t,n,r,i){var s,a=t.split("."),o=this.f(a[0],n,r,i),c=this.options.modelGet,u=null;if(t==="."&&b(n[n.length-2])){o=n[n.length-1]}else{for(var l=1;l<a.length;l++){s=e(a[l],o,c);if(s!==undefined){u=o;o=s}else{o=""}}}if(i&&!o){return false}if(!i&&typeof o=="function"){n.push(u);o=this.mv(o,n,r);n.pop()}return o},f:function(t,n,r,i){var s=false,a=null,o=false,c=this.options.modelGet;for(var u=n.length-1;u>=0;u--){a=n[u];s=e(t,a,c);if(s!==undefined){o=true;break}}if(!o){return i?false:""}if(!i&&typeof s=="function"){s=this.mv(s,n,r)}return s},ls:function(t,e,n,r,i){var s=this.options.delimiters;this.options.delimiters=i;this.b(this.ct(u(t.call(e,r)),e,n));this.options.delimiters=s;return false},ct:function(t,e,n){if(this.options.disableLambda){throw new Error("Lambda features disabled.")}return this.c.compile(t,this.options).render(e,n)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;this.buf="";return t},ms:function(t,e,n,r,i,s,a){var o,c=e[e.length-1],u=t.call(c);if(typeof u=="function"){if(r){return true}else{o=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text;return this.ls(u,c,n,o.substring(i,s),a)}}return u},mv:function(t,e,n){var r=e[e.length-1];var i=t.call(r);if(typeof i=="function"){return this.ct(u(i.call(r)),r,n)}return i},sub:function(t,e,n,r){var i=this.subs[t];if(i){this.activeSub=t;i(e,n,this,r);this.activeSub=false}}};function e(t,e,n){var r;if(e&&typeof e=="object"){if(e[t]!==undefined){r=e[t]}else if(n&&e.get&&typeof e.get=="function"){r=e.get(t)}}return r}function n(t,e,n,r,i,s){function a(){}a.prototype=t;function o(){}o.prototype=t.subs;var c;var u=new a;u.subs=new o;u.subsText={};u.buf="";r=r||{};u.stackSubs=r;u.subsText=s;for(c in e){if(!r[c])r[c]=e[c]}for(c in r){u.subs[c]=r[c]}i=i||{};u.stackPartials=i;for(c in n){if(!i[c])i[c]=n[c]}for(c in i){u.partials[c]=i[c]}return u}var r=/&/g,i=/</g,s=/>/g,a=/\'/g,o=/\"/g,c=/[&<>\"\']/;function u(t){return String(t===null||t===undefined?"":t)}function l(t){t=u(t);return c.test(t)?t.replace(r,"&amp;").replace(i,"&lt;").replace(s,"&gt;").replace(a,"&#39;").replace(o,"&quot;"):t}var b=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}})(typeof exports!=="undefined"?exports:t);(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e():typeof define==="function"&&define.amd?define(e):t.ES6Promise=e()})(this,function(){"use strict";function t(t){return typeof t==="function"||typeof t==="object"&&t!==null}function e(t){return typeof t==="function"}var n=undefined;if(!Array.isArray){n=function(t){return Object.prototype.toString.call(t)==="[object Array]"}}else{n=Array.isArray}var r=n;var i=0;var s=undefined;var a=undefined;var o=function t(e,n){k[i]=e;k[i+1]=n;i+=2;if(i===2){if(a){a(w)}else{x()}}};function c(t){a=t}function u(t){o=t}var l=typeof window!=="undefined"?window:undefined;var b=l||{};var f=b.MutationObserver||b.WebKitMutationObserver;var h=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var p=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function d(){return function(){return process.nextTick(w)}}function v(){if(typeof s!=="undefined"){return function(){s(w)}}return y()}function g(){var t=0;var e=new f(w);var n=document.createTextNode("");e.observe(n,{characterData:true});return function(){n.data=t=++t%2}}function m(){var t=new MessageChannel;t.port1.onmessage=w;return function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(w,1)}}var k=new Array(1e3);function w(){for(var t=0;t<i;t+=2){var e=k[t];var n=k[t+1];e(n);k[t]=undefined;k[t+1]=undefined}i=0}function T(){try{var t=require;var e=t("vertx");s=e.runOnLoop||e.runOnContext;return v()}catch(t){return y()}}var x=undefined;if(h){x=d()}else if(f){x=g()}else if(p){x=m()}else if(l===undefined&&typeof require==="function"){x=T()}else{x=y()}function _(t,e){var n=arguments;var r=this;var i=new this.constructor(S);if(i[A]===undefined){$(i)}var s=r._state;if(s){(function(){var t=n[s-1];o(function(){return U(s,i,t,r._result)})})()}else{W(r,i,t,e)}return i}function E(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e){return t}var n=new e(S);M(n,t);return n}var A=Math.random().toString(36).substring(16);function S(){}var I=void 0;var z=1;var j=2;var C=new D;function L(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function Y(t){try{return t.then}catch(t){C.error=t;return C}}function P(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function O(t,e,n){o(function(t){var r=false;var i=P(n,e,function(n){if(r){return}r=true;if(e!==n){M(t,n)}else{N(t,n)}},function(e){if(r){return}r=true;F(t,e)},"Settle: "+(t._label||" unknown promise"));if(!r&&i){r=true;F(t,i)}},t)}function H(t,e){if(e._state===z){N(t,e._result)}else if(e._state===j){F(t,e._result)}else{W(e,undefined,function(e){return M(t,e)},function(e){return F(t,e)})}}function X(t,n,r){if(n.constructor===t.constructor&&r===_&&n.constructor.resolve===E){H(t,n)}else{if(r===C){F(t,C.error)}else if(r===undefined){N(t,n)}else if(e(r)){O(t,n,r)}else{N(t,n)}}}function M(e,n){if(e===n){F(e,L())}else if(t(n)){X(e,n,Y(n))}else{N(e,n)}}function B(t){if(t._onerror){t._onerror(t._result)}q(t)}function N(t,e){if(t._state!==I){return}t._result=e;t._state=z;if(t._subscribers.length!==0){o(q,t)}}function F(t,e){if(t._state!==I){return}t._state=j;t._result=e;o(B,t)}function W(t,e,n,r){var i=t._subscribers;var s=i.length;t._onerror=null;i[s]=e;i[s+z]=n;i[s+j]=r;if(s===0&&t._state){o(q,t)}}function q(t){var e=t._subscribers;var n=t._state;if(e.length===0){return}var r=undefined,i=undefined,s=t._result;for(var a=0;a<e.length;a+=3){r=e[a];i=e[a+n];if(r){U(n,r,i,s)}else{i(s)}}t._subscribers.length=0}function D(){this.error=null}var G=new D;function K(t,e){try{return t(e)}catch(t){G.error=t;return G}}function U(t,n,r,i){var s=e(r),a=undefined,o=undefined,c=undefined,u=undefined;if(s){a=K(r,i);if(a===G){u=true;o=a.error;a=null}else{c=true}if(n===a){F(n,R());return}}else{a=i;c=true}if(n._state!==I){}else if(s&&c){M(n,a)}else if(u){F(n,o)}else if(t===z){N(n,a)}else if(t===j){F(n,a)}}function V(t,e){try{e(function e(n){M(t,n)},function e(n){F(t,n)})}catch(e){F(t,e)}}var J=0;function Z(){return J++}function $(t){t[A]=J++;t._state=undefined;t._result=undefined;t._subscribers=[]}function Q(t,e){this._instanceConstructor=t;this.promise=new t(S);if(!this.promise[A]){$(this.promise)}if(r(e)){this._input=e;this.length=e.length;this._remaining=e.length;this._result=new Array(this.length);if(this.length===0){N(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){N(this.promise,this._result)}}}else{F(this.promise,tt())}}function tt(){return new Error("Array Methods must be provided an Array")}Q.prototype._enumerate=function(){var t=this.length;var e=this._input;for(var n=0;this._state===I&&n<t;n++){this._eachEntry(e[n],n)}};Q.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;var r=n.resolve;if(r===E){var i=Y(t);if(i===_&&t._state!==I){this._settledAt(t._state,e,t._result)}else if(typeof i!=="function"){this._remaining--;this._result[e]=t}else if(n===at){var s=new n(S);X(s,t,i);this._willSettleAt(s,e)}else{this._willSettleAt(new n(function(e){return e(t)}),e)}}else{this._willSettleAt(r(t),e)}};Q.prototype._settledAt=function(t,e,n){var r=this.promise;if(r._state===I){this._remaining--;if(t===j){F(r,n)}else{this._result[e]=n}}if(this._remaining===0){N(r,this._result)}};Q.prototype._willSettleAt=function(t,e){var n=this;W(t,undefined,function(t){return n._settledAt(z,e,t)},function(t){return n._settledAt(j,e,t)})};function et(t){return new Q(this,t).promise}function nt(t){var e=this;if(!r(t)){return new e(function(t,e){return e(new TypeError("You must pass an array to race."))})}else{return new e(function(n,r){var i=t.length;for(var s=0;s<i;s++){e.resolve(t[s]).then(n,r)}})}}function rt(t){var e=this;var n=new e(S);F(n,t);return n}function it(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function st(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function at(t){this[A]=Z();this._result=this._state=undefined;this._subscribers=[];if(S!==t){typeof t!=="function"&&it();this instanceof at?V(this,t):st()}}at.all=et;at.race=nt;at.resolve=E;at.reject=rt;at._setScheduler=c;at._setAsap=u;at._asap=o;at.prototype={constructor:at,then:_,catch:function t(e){return this.then(null,e)}};function ot(){var t=undefined;if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(n==="[object Promise]"&&!e.cast){return}}t.Promise=at}at.polyfill=ot;at.Promise=at;return at});ES6Promise.polyfill();var e;(function(e){var n=e.templates={};n["build"]=new t.Template({code:function(t,e,n){var r=this;r.b(n=n||"");if(r.s(r.f("success",t,e,1),t,e,0,12,2318,"{{ }}")){r.rs(t,e,function(t,e,r){r.b("\t<h2>");r.b("\n"+n);r.b("\t\t");r.b(r.v(r.d("repo.slug",t,e,0)));r.b("\n"+n);r.b('\t\t<span class="pull-right">');r.b("\n"+n);r.b('\t\t\t<a href="https://github.com/');r.b(r.v(r.d("repo.slug",t,e,0)));r.b('" title="Open on GitHub" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t<span class="fa fa-0 fa-github"></span>');r.b("\n"+n);r.b("\t\t\t</a>");r.b("\n"+n);r.b('\t\t\t<a href="https://travis-ci.org/');r.b(r.v(r.d("repo.slug",t,e,0)));r.b('" title="Open on Travis.org" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t<span class="fa fa-0 fa-cubes"></span>');r.b("\n"+n);r.b("\t\t\t</a>");r.b("\n"+n);r.b("\t\t</span>");r.b("\n"+n);r.b("\t</h2>");r.b("\n"+n);r.b('\t<div class="build status-');r.b(r.v(r.d("build.state",t,e,0)));r.b('">');r.b("\n"+n);r.b('\t\t<h3 class="status-label">');r.b("\n"+n);r.b('\t\t\t<a href="?p=build&id=');r.b(r.v(r.f("id",t,e,0)));r.b('">');r.b("\n"+n);r.b("\t\t\t\t#");r.b(r.v(r.d("build.number",t,e,0)));r.b(" ");r.b(r.v(r.d("build.state",t,e,0)));r.b(' :: <span class="fa fa-0 fa-code-fork"></span> ');r.b(r.v(r.d("commit.branch",t,e,0)));r.b("\n"+n);r.b("\t\t\t</a>");r.b("\n"+n);r.b('\t\t\t<span class="pull-right">');r.b("\n"+n);r.b('\t\t\t\t<a href="https://github.com/');r.b(r.v(r.d("repo.slug",t,e,0)));r.b("/commit/");r.b(r.v(r.d("commit.sha",t,e,0)));r.b('" title="Open on GitHub" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t\t<span class="fa fa-github"></span>');r.b("\n"+n);r.b("\t\t\t\t</a>");r.b("\n"+n);r.b('\t\t\t\t<a href="https://travis-ci.org/');r.b(r.v(r.d("repo.slug",t,e,0)));r.b("/builds/");r.b(r.v(r.d("build.id",t,e,0)));r.b('" title="Open on Travis.org" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t\t<span class="fa fa-cubes"></span>');r.b("\n"+n);r.b("\t\t\t\t</a>");r.b("\n"+n);r.b("\t\t\t</span>");r.b("\n"+n);r.b("\t\t</h3>");r.b("\n"+n);r.b('\t\t<div class="status-info">');r.b("\n"+n);r.b("\t\t\t<pre>");r.b(r.v(r.d("commit.author_name",t,e,0)));r.b(": ");r.b(r.v(r.d("commit.message",t,e,0)));r.b("</pre>");r.b("\n"+n);r.b("\t\t</div>");r.b("\n"+n);r.b("\t</div>");r.b("\n");r.b("\n"+n);r.b('\t<ul class="jobs">');r.b("\n"+n);if(r.s(r.f("logs",t,e,1),t,e,0,1078,1390,"{{ }}")){r.rs(t,e,function(t,e,r){r.b('\t\t\t<li class="status-');r.b(r.v(r.d("job.state",t,e,0)));r.b(' status-label">');r.b("\n"+n);r.b('\t\t\t\t<a href="#job-');r.b(r.v(r.d("job.id",t,e,0)));r.b('" id="job-link-');r.b(r.v(r.d("job.id",t,e,0)));r.b('">#');r.b(r.v(r.d("job.number",t,e,0)));r.b(" ");r.b(r.v(r.d("build.state",t,e,0)));r.b("</a>");r.b("\n"+n);r.b('\t\t\t\t<a href="https://travis-ci.org/');r.b(r.v(r.d("repo.slug",t,e,0)));r.b("/jobs/");r.b(r.v(r.d("job.id",t,e,0)));r.b('" titlte="Open on Travis.org" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t\t<span class="fa fa-cubes"></span>');r.b("\n"+n);r.b("\t\t\t\t</a>");r.b("\n"+n);r.b("\t\t\t</li>");r.b("\n"+n)});t.pop()}r.b("\t</ul>");r.b("\n"+n);if(r.s(r.f("logs",t,e,1),t,e,0,1417,2308,"{{ }}")){r.rs(t,e,function(t,e,r){r.b('\t\t<div class="job status-');r.b(r.v(r.d("job.state",t,e,0)));r.b('" id="job-');r.b(r.v(r.d("job.id",t,e,0)));r.b('">');r.b("\n"+n);if(r.s(r.d("lines.exists",t,e,1),t,e,0,1499,2036,"{{ }}")){r.rs(t,e,function(t,e,r){r.b('\t\t\t\t<input type="range" class="computer-time" min="');r.b(r.v(r.d("lines.minTime",t,e,0)));r.b('" max="');r.b(r.v(r.d("lines.maxTime",t,e,0)));r.b('" value="');r.b(r.v(r.d("lines.minTime",t,e,0)));r.b('" id="computer-time-');r.b(r.v(r.d("job.id",t,e,0)));r.b('" step="1" />');r.b("\n");r.b("\n"+n);r.b('\t\t\t\t<div class="computer-control">');r.b("\n"+n);r.b('\t\t\t\t\t<div class="computer-log">');r.b("\n"+n);r.b('\t\t\t\t\t\t<pre class="computer-output" id="computer-output-');r.b(r.v(r.d("job.id",t,e,0)));r.b('"></pre>');r.b("\n"+n);r.b("\t\t\t\t\t</div>");r.b("\n"+n);r.b('\t\t\t\t\t<div class="computer-terminal" data-sticky-container>');r.b("\n"+n);r.b('\t\t\t\t\t\t<div class="computer-terminal-container">');r.b("\n"+n);r.b('\t\t\t\t\t\t\t<canvas class="computer-canvas" id="computer-');r.b(r.v(r.d("job.id",t,e,0)));r.b('"></canvas>');r.b("\n"+n);r.b("\t\t\t\t\t\t</div>");r.b("\n"+n);r.b("\t\t\t\t\t</div>");r.b("\n"+n);r.b("\t\t\t\t</div>");r.b("\n"+n)});t.pop()}if(!r.s(r.d("lines.exists",t,e,1),t,e,1,0,0,"")){r.b('\t\t\t\t<div class="text-content">');r.b("\n"+n);r.b("\t\t\t\t\t<p>");r.b("\n"+n);r.b("\t\t\t\t\t\tThis is odd. We can't seem to find any terminal data for this job. Did something go wrong?");r.b("\n"+n);r.b("\t\t\t\t\t\tAre you sure you got the right build?");r.b("\n"+n);r.b("\t\t\t\t\t</p>");r.b("\n"+n);r.b("\t\t\t\t</div>");r.b("\n"+n)}r.b("\t\t</div>");r.b("\n"+n)});t.pop()}});t.pop()}if(!r.s(r.f("success",t,e,1),t,e,1,0,0,"")){r.b('\t<div class="text-content">');r.b(r.rp("<request_error0",t,e,""));r.b("</div>");r.b("\n"+n)}return r.fl()},partials:{"<request_error0":{name:"request_error",partials:{},subs:{}}},subs:{}});n["builds"]=new t.Template({code:function(t,e,n){var r=this;r.b(n=n||"");r.b('<div class="text-content">');r.b("\n"+n);if(r.s(r.f("success",t,e,1),t,e,0,39,1172,"{{ }}")){r.rs(t,e,function(t,e,r){r.b("\t<h2>");r.b("\n"+n);r.b("\t\t");r.b(r.v(r.f("repo",t,e,0)));r.b("\n"+n);r.b('\t\t<span class="pull-right">');r.b("\n"+n);r.b('\t\t\t<a href="https://github.com/');r.b(r.v(r.f("repo",t,e,0)));r.b('" title="Open on GitHub" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t<span class="fa fa-0 fa-github"></span>');r.b("\n"+n);r.b("\t\t\t</a>");r.b("\n"+n);r.b('\t\t\t<a href="https://travis-ci.org/');r.b(r.v(r.f("repo",t,e,0)));r.b('" title="Open on Travis.org" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t<span class="fa fa-0 fa-cubes"></span>');r.b("\n"+n);r.b("\t\t\t</a>");r.b("\n"+n);r.b("\t\t</span>");r.b("\n"+n);r.b("\t</h2>");r.b("\n");r.b("\n"+n);if(r.s(r.f("builds",t,e,1),t,e,0,387,1057,"{{ }}")){r.rs(t,e,function(t,e,r){r.b('\t\t<div class="build status-');r.b(r.v(r.f("state",t,e,0)));r.b('">');r.b("\n"+n);r.b('\t\t\t<h3 class="status-label">');r.b("\n"+n);r.b('\t\t\t\t<a href="?p=build&id=');r.b(r.v(r.f("id",t,e,0)));r.b('">');r.b("\n"+n);r.b("\t\t\t\t\t#");r.b(r.v(r.f("number",t,e,0)));r.b(" ");r.b(r.v(r.f("state",t,e,0)));r.b(' :: <span class="fa fa-0 fa-code-fork"></span> ');r.b(r.v(r.d("commit.branch",t,e,0)));r.b("\n"+n);r.b("\t\t\t\t</a>");r.b("\n"+n);r.b('\t\t\t\t<span class="pull-right">');r.b("\n"+n);r.b('\t\t\t\t\t<a href="https://github.com/');r.b(r.v(r.f("repo",t,e,0)));r.b("/commit/");r.b(r.v(r.d("commit.sha",t,e,0)));r.b('" title="Open on GitHub" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t\t\t<span class="fa fa-github"></span>');r.b("\n"+n);r.b("\t\t\t\t\t</a>");r.b("\n"+n);r.b('\t\t\t\t\t<a href="https://travis-ci.org/');r.b(r.v(r.f("repo",t,e,0)));r.b("/builds/");r.b(r.v(r.f("id",t,e,0)));r.b('" title="Open on Travis.org" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t\t\t<span class="fa fa-cubes"></span>');r.b("\n"+n);r.b("\t\t\t\t\t</a>");r.b("\n"+n);r.b("\t\t\t\t</span>");r.b("\n"+n);r.b("\t\t\t</h3>");r.b("\n"+n);r.b('\t\t\t<div class="build-info">');r.b("\n"+n);r.b("\t\t\t\t<pre>");r.b(r.v(r.d("commit.author_name",t,e,0)));r.b(": ");r.b(r.v(r.d("commit.message",t,e,0)));r.b("</pre>");r.b("\n"+n);r.b("\t\t\t</div>");r.b("\n"+n);r.b("\t\t</div>");r.b("\n"+n)});t.pop()}if(!r.s(r.f("builds",t,e,1),t,e,1,0,0,"")){r.b("\t\t<p>It doesn't appear this repo has any builds. Are you sure it exists?</p>");r.b("\n"+n)}});t.pop()}if(!r.s(r.f("success",t,e,1),t,e,1,0,0,"")){r.b(r.rp("<request_error0",t,e,"\t"))}r.b("</div>");r.b("\n");return r.fl()},partials:{"<request_error0":{name:"request_error",partials:{},subs:{}}},subs:{}});n["error"]=new t.Template({code:function(t,e,n){var r=this;r.b(n=n||"");r.b('<div class="text-content">');r.b("\n"+n);r.b("<h2>Ooops</h2>");r.b("\n");r.b("\n"+n);r.b('<p class="text-error">');r.b("\n"+n);r.b("\tWe can't find the page <code>");r.b(r.v(r.f("name",t,e,0)));r.b("</code>. Maybe you mistyped it, or something else broke.");r.b("\n"+n);r.b("</p>");r.b("\n"+n);r.b("</div>");r.b("\n");return r.fl()},partials:{},subs:{}});n["index"]=new t.Template({code:function(t,e,n){var r=this;r.b(n=n||"");r.b('<div class="text-content">');r.b("\n");r.b("\n"+n);r.b("<h2>howl.ci</h2>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b("\thowl.ci is a project which aims to provide a continuous integration service to ComputerCraft users.");r.b("\n"+n);r.b("</p>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b('\tBuilds are executed by <a href="https://travis-ci.org/" title="The Travis CI provider" target="_blank">Travis</a>');r.b("\n"+n);r.b("\tand the terminal output captured. howl.ci then scrapes these logs and renders them in place on the website.");r.b("\n"+n);r.b("</p>");r.b("\n");r.b("\n"+n);r.b("<h3>Example</h3>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b('\tYou can view <a href="?p=builds&repo=SquidDev-CC/Howl">historic builds of Howl</a>. You can also render log files from');r.b("\n"+n);r.b('\t<a href="?p=url&url=https://gist.githubusercontent.com/SquidDev/b3e88899a86ee73fa2510389b141e9e3/raw/terminal_codes.txt">aribtrary');r.b("\n"+n);r.b("\turls</a>");r.b("\n"+n);r.b("</p>");r.b("\n");r.b("\n"+n);r.b("<h3>Getting set up</h3>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b("\tFirstly you'll need to get set up with Travis. You need to download the executor and run it in the relevent");r.b("\n"+n);r.b("\tdirectory. We'll create a <code>.travis.yml</code> file like so:");r.b("\n"+n);r.b("</p>");r.b("\n"+n);r.b('<pre class="box">');r.b("\n"+n);r.b("jdk:");r.b("\n"+n);r.b("  - oraclejdk8");r.b("\n"+n);r.b("install:");r.b("\n"+n);r.b("  - wget -O howlci.jar https://dl.bintray.com/squiddev/maven/org/squiddev/howl.ci/0.1/howl.ci-0.1.jar");r.b("\n"+n);r.b("script:");r.b("\n"+n);r.b("  - java -jar howlci.jar");r.b("\n"+n);r.b("</pre>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b("\tYou'll probably want to configure howl.ci for your particular use case. To do this you'll need a");r.b("\n"+n);r.b("\t<code>.howl.properties</code> file.");r.b("\n"+n);r.b("</p>");r.b("\n"+n);r.b('<pre class="box">');r.b("\n"+n);r.b("computer.0.saveDir=.");r.b("\n"+n);r.b("computer.0.startup=.build.lua");r.b("\n"+n);r.b("</pre>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b("\tThis configures the initial computer to run in the current directory and execute the .build.lua file. You don't need");r.b("\n"+n);r.b("\tto specify that second line if you have a <code>startup</code> file.");r.b("\n"+n);r.b("</p>");r.b("\n");r.b("\n"+n);r.b("<h3>Making your builds do something</h3>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b("\tThe issue here is that howl.ci, and so Travis has no way of telling if your build has succeeded or not. To do this");r.b("\n"+n);r.b("\tyou should use the <code>howlci</code> API. This provides a <code>howlapi.status(status:string, message:string)</code>");r.b("\n"+n);r.b("\tthat sets the status of your build.");r.b("\n"+n);r.b("</p>");r.b("\n"+n);r.b("<p>");r.b("\n"+n);r.b('\tBuilds have three states: "success" for when everything went OK, "failure" for when your tests didn\'t go right and');r.b("\n"+n);r.b('\t"error" for when something unexpected that you were not expecting: such as everything crashing. If you don\'t');r.b("\n"+n);r.b("\tterminate with a status then howl.ci will presume the build errored.");r.b("\n"+n);r.b("</p>");r.b("\n");r.b("\n"+n);r.b("</div>");r.b("\n");return r.fl()},partials:{},subs:{}});n["request_error"]=new t.Template({code:function(t,e,n){var r=this;r.b(n=n||"");r.b("<h2>There was an error connecting to the Travis API</h2>");r.b("\n"+n);if(r.s(r.f("status",t,e,1),t,e,0,68,295,"{{ }}")){r.rs(t,e,function(t,e,r){r.b("\t<p>My AJAX request went to Travis and all it got was this lousy status code: <code>");r.b(r.v(r.f("status",t,e,0)));r.b("</code></p>");r.b("\n"+n);r.b("\t<hr />");r.b("\n"+n);r.b("\t<h3>Response body:</h3>");r.b("\n"+n);r.b("\t<p><pre>");r.b(r.v(r.f("text",t,e,0)));r.b("</pre></p>");r.b("\n"+n);r.b("\t<h3>Response headers:</h3>");r.b("\n"+n);r.b("\t<p><pre>");r.b(r.v(r.f("headers",t,e,0)));r.b("</pre></p>");r.b("\n"+n)});t.pop()}if(!r.s(r.f("status",t,e,1),t,e,1,0,0,"")){r.b("\t<p>We couldn't connect to Travis at all: maybe it is down?");r.b("\n"+n)}return r.fl()},partials:{},subs:{}});n["url"]=new t.Template({code:function(t,e,n){var r=this;r.b(n=n||"");if(r.s(r.f("success",t,e,1),t,e,0,12,658,"{{ }}")){r.rs(t,e,function(t,e,r){r.b("\t<h2>");r.b("\n"+n);r.b("\t\t");r.b(r.v(r.f("url",t,e,0)));r.b("\n"+n);r.b('\t\t<span class="pull-right">');r.b("\n"+n);r.b('\t\t\t<a href="');r.b(r.v(r.f("url",t,e,0)));r.b('" title="Open this URL" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t<span class="fa fa-0 fa-link"></span>');r.b("\n"+n);r.b("\t\t\t</a>");r.b("\n"+n);r.b("\t\t</span>");r.b("\n"+n);r.b("\t</h2>");r.b("\n");r.b("\n"+n);r.b('\t<input type="range" class="computer-time" min="');r.b(r.v(r.d("lines.minTime",t,e,0)));r.b('" max="');r.b(r.v(r.d("lines.maxTime",t,e,0)));r.b('" value="');r.b(r.v(r.d("lines.minTime",t,e,0)));r.b('" id="computer-time-0" step="1" />');r.b("\n");r.b("\n"+n);r.b('\t<div class="computer-control">');r.b("\n"+n);r.b('\t\t<div class="computer-log">');r.b("\n"+n);r.b('\t\t\t<pre class="computer-output" id="computer-output-0"></pre>');r.b("\n"+n);r.b("\t\t</div>");r.b("\n"+n);r.b('\t\t<div class="computer-terminal" data-sticky-container>');r.b("\n"+n);r.b('\t\t\t<div class="computer-terminal-container">');r.b("\n"+n);r.b('\t\t\t\t<canvas class="computer-canvas" id="computer-0"></canvas>');r.b("\n"+n);r.b("\t\t\t</div>");r.b("\n"+n);r.b("\t\t</div>");r.b("\n"+n);r.b("\t</div>");r.b("\n"+n)});t.pop()}if(!r.s(r.f("success",t,e,1),t,e,1,0,0,"")){r.b('\t<div class="text-content">');r.b("\n"+n);r.b("\t<h2>");r.b("\n"+n);r.b("\t\t");r.b(r.v(r.f("url",t,e,0)));r.b("\n"+n);r.b('\t\t<span class="pull-right">');r.b("\n"+n);r.b('\t\t\t<a href="');r.b(r.v(r.f("url",t,e,0)));r.b('" title="Open this URL" target="_blank">');r.b("\n"+n);r.b('\t\t\t\t<span class="fa fa-0 fa-link"></span>');r.b("\n"+n);r.b("\t\t\t</a>");r.b("\n"+n);r.b("\t\t</span>");r.b("\n"+n);r.b("\t</h2>");r.b("\n");r.b("\n"+n);if(r.s(r.f("fetched",t,e,1),t,e,0,897,1008,"{{ }}")){r.rs(t,e,function(t,e,r){r.b("\t\t<p>We fetched your page OK but couldn't extract a terminal from it. Are you sure it was the right one?</p>");r.b("\n"+n)});t.pop()}if(r.s(r.f("status",t,e,1),t,e,0,1033,1269,"{{ }}")){r.rs(t,e,function(t,e,r){r.b("\t\t<p>My AJAX request went to your URL and all it got was this lousy status code: <code>");r.b(r.v(r.f("status",t,e,0)));r.b("</code></p>");r.b("\n"+n);r.b("\t\t<hr />");r.b("\n"+n);r.b("\t\t<h3>Response body:</h3>");r.b("\n"+n);r.b("\t\t<p><pre>");r.b(r.v(r.f("text",t,e,0)));r.b("</pre></p>");r.b("\n"+n);r.b("\t\t<h3>Response headers:</h3>");r.b("\n"+n);r.b("\t\t<p><pre>");r.b(r.v(r.f("headers",t,e,0)));r.b("</pre></p>");r.b("\n"+n)});t.pop()}if(r.s(r.f("nothing",t,e,1),t,e,0,1294,1363,"{{ }}")){r.rs(t,e,function(t,e,r){r.b("\t\t<p>We couldn't connect to this site at at all: maybe it is down?");r.b("\n"+n)});t.pop()}r.b("\t</div>");r.b("\n"+n)}return r.fl()},partials:{},subs:{}})})(e||(e={}));"use strict";var n=function(){function t(t){if(t===void 0){t={}}this.vp=this.getViewportSize();this.scrollTop=this.getScrollTopPosition();this.options={marginTop:t.marginTop||0,stickyFor:t.stickyFor||0,stickyClass:t.stickyClass||null}}t.prototype.setup=function(t){var e=this;if(t.sticky)return;t.sticky={};t.sticky.active=false;t.sticky.marginTop=parseInt(t.getAttribute("data-margin-top"))||this.options.marginTop;t.sticky.stickyFor=parseInt(t.getAttribute("data-sticky-for"))||this.options.stickyFor;t.sticky.stickyClass=t.getAttribute("data-sticky-class")||this.options.stickyClass;t.sticky.container=this.getStickyContainer(t);t.sticky.container.rect=this.getRectangle(t.sticky.container);t.sticky.rect=this.getRectangle(t);if(t.tagName.toLowerCase==="img"){t.onload=function(){return t.sticky.rect=e.getRectangle(t)}}this.activate(t)};t.prototype.activate=function(t){var e=t.sticky.container.offsetHeight;this.css(t,{position:"fixed"});var n=t.sticky.container.offsetHeight;this.css(t,{position:""});if(!t.sticky.resizeEvent){this.initResizeEvents(t);t.sticky.resizeEvent=true}if(!t.sticky.scrollEvent){this.initScrollEvents(t);t.sticky.scrollEvent=true}this.onResizeEvents(t)};t.prototype.initResizeEvents=function(t){var e=this;t.sticky.resizeListener=function(){return e.onResizeEvents(t)};window.addEventListener("resize",t.sticky.resizeListener)};t.prototype.onResizeEvents=function(t){this.vp=this.getViewportSize();t.sticky.rect=this.getRectangle(t);t.sticky.container.rect=this.getRectangle(t.sticky.container);if(t.sticky.stickyFor<this.vp.width&&!t.sticky.active){t.sticky.active=true}else if(t.sticky.stickyFor>=this.vp.width&&t.sticky.active){t.sticky.active=false}this.setPosition(t)};t.prototype.initScrollEvents=function(t){var e=this;t.sticky.scrollListener=function(){return e.onScrollEvents(t)};window.addEventListener("scroll",t.sticky.scrollListener)};t.prototype.onScrollEvents=function(t){this.scrollTop=this.getScrollTopPosition();if(t.sticky.active){this.setPosition(t)}};t.prototype.setPosition=function(t){this.css(t,{position:"",width:"",top:"",left:""});if(this.vp.height<t.sticky.rect.height||!t.sticky.active){return}if(!t.sticky.rect.width){t.sticky.rect=this.getRectangle(t)}if(this.scrollTop>t.sticky.rect.top-t.sticky.marginTop){this.css(t,{position:"fixed",width:t.sticky.rect.width+"px",left:t.sticky.rect.left+"px"});if(this.scrollTop+t.sticky.rect.height+t.sticky.marginTop>t.sticky.container.rect.top+t.sticky.container.offsetHeight){if(t.sticky.stickyClass)t.classList.remove(t.sticky.stickyClass);this.css(t,{top:t.sticky.container.rect.top+t.sticky.container.offsetHeight-(this.scrollTop+t.sticky.rect.height)+"px"})}else{if(t.sticky.stickyClass)t.classList.add(t.sticky.stickyClass);this.css(t,{top:t.sticky.marginTop+"px"})}}else{if(t.sticky.stickyClass)t.classList.remove(t.sticky.stickyClass);this.css(t,{position:"",width:"",top:"",left:""})}};t.prototype.update=function(t){t.sticky.rect=this.getRectangle(t);t.sticky.container.rect=this.getRectangle(t.sticky.container);this.activate(t)};t.prototype.getStickyContainer=function(t){var e=t;while(!e.hasAttribute("data-sticky-container")&&e!==document.querySelector("body")){e=e.parentNode}return e};t.prototype.getRectangle=function(t){this.css(t,{position:"",width:"",top:"",left:""});var e=Math.max(t.offsetWidth,t.clientWidth);var n=Math.max(t.offsetHeight,t.clientHeight);var r=0;var i=0;do{r+=t.offsetTop||0;i+=t.offsetLeft||0;t=t.offsetParent}while(t);return{top:r,left:i,width:e,height:n}};t.prototype.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}};t.prototype.getScrollTopPosition=function(){return(window.pageYOffset||document.body.scrollTop)-(document.body.clientTop||0)||0};t.prototype.forEach=function(t,e){for(var n=0,r=t.length;n<r;n++){e(t[n])}};t.prototype.css=function(t,e){for(var n in e){if(e.hasOwnProperty(n)){t.style[n]=e[n]}}};return t}();var e;(function(t){var e;(function(t){"use strict";t.parse=function(t){var e=[];var n=0;var r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var s=0,a=t.split("\n");s<a.length;s++){var o=a[s];var c=o.match(/^([A-Z]{2}):([^;]*);([\s\S]*)$/);if(c){var u="unknown",l=n;var b=c[2];var f=b.match(/^([^,]+),(\d+)$/);if(f){u=f[1];l=n=parseInt(f[2],10)}r=Math.min(r,l);i=Math.max(i,l);e.push({computer:u,time:n,command:c[1],meta:b,data:c[3]})}}e.sort(function(t,e){return t.time-e.time});return{lines:e,exists:e.length>0,minTime:r,maxTime:i}}})(e=t.Packets||(t.Packets={}))})(e||(e={}));var e;(function(t){var e;(function(t){"use strict";(function(t){t[t["Status"]=0]="Status";t[t["Log"]=1]="Log";t[t["Close"]=2]="Close"})(t.LogKind||(t.LogKind={}));var e=t.LogKind;var n=function(){function t(){}return t}();t.LogItem=n;var r=function(t,e,n){return t.substr(0,n)+e+t.substr(n+e.length)};var i=function(){function t(){}t.empty=function(){var e=new t;e.init(0,0);return e};t.prototype.init=function(t,e){this.cursorX=0;this.cursorY=0;this.cursorBlink=false;this.currentFore="0";this.currentBack="f";this.log=[];this.resize(t,e)};t.prototype.resize=function(t,e){this.sizeX=t;this.sizeY=e;this.text=new Array(e);this.fore=new Array(e);this.back=new Array(e);var n="",r="",i="";for(var s=0;s<t;s++){n+=" ";r+=this.currentFore;i+=this.currentBack}for(var a=0;a<e;a++){this.text[a]=n;this.fore[a]=r;this.back[a]=i}};t.prototype.clone=function(){var e=new t;e.text=this.text;e.fore=this.fore;e.back=this.back;e.sizeX=this.sizeX;e.sizeY=this.sizeY;e.currentFore=this.currentFore;e.currentBack=this.currentBack;e.cursorX=this.cursorX;e.cursorY=this.cursorY;e.cursorBlink=this.cursorBlink;e.log=this.log;return e};t.prototype.handlePacket=function(t,n){var i=this.clone();switch(t){case"TC":{var s=n.match(/(-?\d+),(-?\d+)/),a=s[0],o=s[1],c=s[2];i.cursorX=parseInt(o,10)-1;i.cursorY=parseInt(c,10)-1;break}case"TB":{i.cursorBlink=n==="true";break}case"TF":{i.currentFore=n.charAt(0);break}case"TK":{i.currentBack=n.charAt(0);break}case"TR":{var u=n.match(/(\d+),(\d+)/),a=u[0],l=u[1],b=u[2];i.resize(parseInt(l,10),parseInt(b,10));break}case"TE":{i.resize(i.sizeX,i.sizeY);break}case"TV":{var l=n.indexOf(",");if(l!=i.sizeX)throw new Error("Width: "+l+" != "+i.sizeX);i.text=new Array(i.sizeY);i.fore=new Array(i.sizeY);i.back=new Array(i.sizeY);for(var c=0;c<i.sizeY;c++){i.fore[c]=n.substr((3*c+0)*(l+1),l);
i.back[c]=n.substr((3*c+1)*(l+1),l);i.text[c]=n.substr((3*c+2)*(l+1),l)}break}case"TY":{i.text=i.text.slice(0);i.fore=i.fore.slice(0);i.back=i.back.slice(0);var l=n.indexOf(",");var c=this.cursorY,o=this.cursorX;if(c<0||c>=this.sizeY)break;i.fore[c]=r(i.fore[c],n.substr(0*(l+1),l),o);i.back[c]=r(i.back[c],n.substr(1*(l+1),l),o);i.text[c]=r(i.text[c],n.substr(2*(l+1),l),o);break}case"TZ":{i.text=i.text.slice(0);i.fore=i.fore.slice(0);i.back=i.back.slice(0);var f=n.match(/(\d+),(\d+),([\s\S]*)/),a=f[0],h=f[1],p=f[2],d=f[3];var o=parseInt(h,10)-1,c=parseInt(p,10)-1;var l=d.indexOf(",");i.fore[c]=r(i.fore[c],d.substr(0*(l+1),l),o);i.back[c]=r(i.back[c],d.substr(1*(l+1),l),o);i.text[c]=r(i.text[c],d.substr(2*(l+1),l),o);break}case"TS":{var v=n.match(/(-?\d+)/),a=v[0],g=v[1];var m=parseInt(g,10);i.resize(i.sizeX,i.sizeY);for(var c=0;c<this.sizeY;++c){var y=c+m;if(y>=0&&y<this.sizeY){i.text[c]=this.text[y];i.fore[c]=this.fore[y];i.back[c]=this.back[y]}}break}case"TW":{i.text=i.text.slice(0);i.fore=i.fore.slice(0);i.back=i.back.slice(0);var l=n.length;var c=this.cursorY,o=this.cursorX;if(c<0||c>=this.sizeY)break;var k="",w="";for(var T=0;T<l;T++){k+=i.currentFore;w+=i.currentBack}i.fore[c]=r(i.fore[c],k,o);i.back[c]=r(i.back[c],w,o);i.text[c]=r(i.text[c],n.substr(0,l),o);break}case"XD":i.log=i.log.slice(0);i.log.push({level:"debug",kind:e.Log,text:n});break;case"XW":i.log=i.log.slice(0);i.log.push({level:"warning",kind:e.Log,text:n});break;case"XE":i.log=i.log.slice(0);i.log.push({level:"error",kind:e.Log,text:n});break;case"XL":{i.log=i.log.slice(0);var x=n.split(",",2),_=x[0],E=x[1];i.log.push({level:_,kind:e.Log,text:E});break}case"XS":{i.log=i.log.slice(0);var A=n.split(",",2),_=A[0],E=A[1];i.log.push({level:_,kind:e.Status,text:E});break}case"SC":i.log=i.log.slice(0);i.log.push({level:"close",kind:e.Close,text:n});break;default:console.warn("Unhandled packet "+t);break}return i};return t}();t.TerminalData=i})(e=t.Terminal||(t.Terminal={}))})(e||(e={}));var e;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=6;var n=9;var r=3;t.pixelWidth=e/r;t.pixelHeight=n/r;var i=96;var s=144;var a={0:"rgb(240, 240, 240)",1:"rgb(242, 178, 51)",2:"rgb(229, 127, 216)",3:"rgb(153, 178, 242)",4:"rgb(222, 222, 108)",5:"rgb(127, 204, 25)",6:"rgb(242, 178, 204)",7:"rgb(76, 76, 76)",8:"rgb(153, 153, 153)",9:"rgb(76, 153, 178)",a:"rgb(178, 102, 229)",b:"rgb(37, 49, 146)",c:"rgb(127, 102, 76)",d:"rgb(87, 166, 78)",e:"rgb(204, 76, 76)",f:"rgb(0, 0, 0)"};var o=new Image;var c={};o.src="termFont.png";var u=false;o.onload=function(){for(var t in a){if(!a.hasOwnProperty(t)){continue}var e=document.createElement("canvas");var n=e.getContext("2d");e.width=i;e.height=s;n.globalCompositeOperation="destination-atop";n.fillStyle=a[t];n.globalAlpha=1;n.fillRect(0,0,i,s);n.drawImage(o,0,0);c[t]=e}u=true};t.background=function(t,r,i,s,o){var c=e*o;var u=n*o;var l=r*c;var b=i*u;t.beginPath();t.rect(l,b,c,u);t.fillStyle=a[s];t.fill()};t.foreground=function(t,r,a,o,l,b){if(!u)return;var f=e*b;var h=n*b;var p=r*f;var d=a*h;var v=l.charCodeAt(0);var g=v%(i/e)*e;var m=Math.floor(v/(s/n))*n;t.drawImage(c[o],g,m,e,n,p,d,e*b,n*b)};t.terminal=function(e,n,r,i){r/=3;var s=n.sizeX;var a=n.sizeY;for(var o=0;o<a;o++){for(var c=0;c<s;c++){t.background(e,c,o,n.back[o].charAt(c),r);t.foreground(e,c,o,n.fore[o].charAt(c),n.text[o].charAt(c),r)}}if(i&&n.cursorBlink&&n.cursorX>=0&&n.cursorX<s&&n.cursorY>=0&&n.cursorY<a){t.foreground(e,n.cursorX,n.cursorY,n.currentFore,"_",r)}};t.bsod=function(r,i,s,o,c){o/=3;r.beginPath();r.rect(0,0,i*e*o,s*n*o);r.fillStyle=a["b"];r.fill();var u=Math.floor((i-c.length)/2);var l=Math.floor((s-1)/2);for(var b=0;b<c.length;b++){t.foreground(r,u+b,l,"0",c.charAt(b),o)}}})(e=t.Render||(t.Render={}))})(e=t.Terminal||(t.Terminal={}))})(e||(e={}));var e;(function(t){var e;(function(t){"use strict";var e=50;var r=1e5*e;var i=function(){function i(e,r,i){var s=this;this.lines=r;this.terminals=i;this.canvas=document.getElementById("computer-"+e);this.context=this.canvas.getContext("2d");this.time=document.getElementById("computer-time-"+e);var a=this.log=document.getElementById("computer-output-"+e);this.sticky=new n({marginTop:10,stickyFor:800});this.sticky.setup(this.canvas.parentElement);var o=0;for(var c=0;c<r.length;c++){var u=r[c].time;var l=i[c];for(var b=o;b<l.log.length;b++){var f=l.log[b];var h=t.LogKind[f.kind].toLowerCase();var p=f.level.replace(/[^\w-]/g,"").toLowerCase();var d=document.createElement("p");d.style.display="hidden";d.className="log-entry log-"+h;d.setAttribute("data-time",u.toString());var v=document.createElement("span");v.innerText="["+p+"]";v.className="log-level log-level-"+p;var g=document.createElement("span");g.innerText=f.text;d.appendChild(v);d.appendChild(g);a.appendChild(d)}o=l.log.length}this.onResizeHandler=this.onResize.bind(this);this.playing=true;this.time.oninput=function(){s.redrawTerminal();s.playing=false;if(s.playbackId!==null){s.playbackId=null;clearTimeout(s.playbackId)}};this.time.onmousedown=function(){s.playing=false;if(s.playbackId!==null){s.playbackId=null;clearTimeout(s.playbackId)}}}i.prototype.redrawTerminal=function(){var e=this.time.valueAsNumber;var n=this.terminals[0];for(var r=1;r<this.lines.length;r++){var i=this.lines[r];n=this.terminals[r-1];if(i.time>e){break}}var s=this.log.childNodes;for(var r=0;r<s.length;r++){var a=s[r];if(a instanceof HTMLElement){a.style.display=parseInt(a.getAttribute("data-time"),10)>e?"none":null}}var o=this.context;var c=n.sizeX||51;var u=n.sizeY||19;var l=this.canvas.parentElement.clientWidth-8;var b=c*t.Render.pixelWidth;var f=u*t.Render.pixelHeight;var h=Math.floor(l/b);if(h<=0)h=1;if(this.canvas.height!==f*h||this.canvas.width!==b*h){this.canvas.height=f*h;this.canvas.width=b*h}o.imageSmoothingEnabled=false;o.oImageSmoothingEnabled=false;o.webkitImageSmoothingEnabled=false;o.mozImageSmoothingEnabled=false;o.msImageSmoothingEnabled=false;if(n.sizeX===0&&n.sizeY===0){t.Render.bsod(o,c,u,h,"No terminal output")}else{t.Render.terminal(o,n,h,Math.floor(this.time.valueAsNumber/4e8)%2===0)}};i.prototype.onResize=function(t){if(t===void 0){t=false}var e=this.canvas.parentElement;if(t||e.clientWidth!==this.oldWidth||e.clientHeight!==this.oldHeight){this.oldWidth=e.clientWidth;this.oldHeight=e.clientHeight;this.redrawTerminal();this.sticky.update(this.canvas.parentElement)}};i.prototype.attach=function(){var t=this;window.addEventListener("resize",this.onResizeHandler);this.onResize(true);if(this.playing){var n=function(){if(!t.playing)return null;t.time.valueAsNumber+=r;if(t.time.valueAsNumber<parseInt(t.time.max,10)){t.playbackId=setTimeout(n,e)}else{t.playing=false;t.playbackId=null}t.redrawTerminal()};n()}};i.prototype.detach=function(){window.removeEventListener("resize",this.onResizeHandler);if(this.playbackId!==null){clearTimeout(this.playbackId);this.playbackId=null}};return i}();t.TerminalControl=i})(e=t.Terminal||(t.Terminal={}))})(e||(e={}));var e;(function(t){"use strict";var e=function(t,e){return new Promise(function(n,r){var i=new XMLHttpRequest;i.open("GET",t);i.setRequestHeader("Accept",e||"application/vnd.travis-ci.2+json");i.timeout=1e4;i.onload=function(){if(i.status>=200&&i.status<300){n(i)}else{r(i)}};i.onerror=function(){return r(i)};i.send(null)})};var n=function(t){return Promise.resolve(t)};var r=function(t,e){var n;if(t.status){n={success:false,text:t.responseText,status:t.status+": "+t.statusText,headers:t.getAllResponseHeaders()}}else{n={success:false,nothing:true}}for(var r in e){if(e.hasOwnProperty(r)){n[r]=e[r]}}return n};t.pages={};t.pages["index"]={build:n,title:function(t){return"Home | howl.ci"}};t.pages["error"]={build:n,title:function(t){return"Page not found | howl.ci"}};t.pages["builds"]={build:function(t){var n=t["repo"];return e("https://api.travis-ci.org/repos/"+n+"/builds").then(function(t){var e=JSON.parse(t.responseText);var r={};for(var i=0,s=e.commits;i<s.length;i++){var a=s[i];r[a.id]=a}for(var o=0,c=e.builds;o<c.length;o++){var u=c[o];u.commit=r[u.commit_id];u.success=u.state==="passed"}return{repo:n,success:true,builds:e.builds}},function(t){return r(t,{repo:n})})},title:function(t){return t.repo+" | howl.ci"}};t.pages["build"]={build:function(n){var i=n["id"];return e("https://api.travis-ci.org/builds/"+i).then(function(n){var r=JSON.parse(n.responseText);var s=r.jobs.map(function(t){return e("https://api.travis-ci.org/jobs/"+t.id+"/log?cors_hax=true","application/json; chunked=true; version=2, text/plain; version=2").then(function(t){if(t.status===204){return e(t.getResponseHeader("Location"),"text/plain")}else{return t}}).then(function(e){return{job:t,content:e.responseText}})});s.push(e("https://api.travis-ci.org/repos/"+r.build.repository_id).then(function(t){return JSON.parse(t.responseText).repo}));return Promise.all(s).then(function(e){var n=e.pop();var s=e.map(function(e){return{job:e.job,lines:t.Packets.parse(e.content)}});return{success:true,id:i,logs:s,repo:n,build:r.build,commit:r.commit}})},function(t){return r(t,{id:i})})},title:function(t){return"Build #"+t.id+" | howl.ci"},after:function(e){if(e.success){var n=null;var r=null;var i=null;var s=function(e){var s;if(e.lines.exists){var a=t.Terminal.TerminalData.empty();var o=e.lines.lines;var c=new Array(o.length);for(var u=0;u<o.length;u++){var l=o[u];a=c[u]=a.handlePacket(l.command,l.data)}s=new t.Terminal.TerminalControl(e.job.id,o,c)}else{s=null}var b=document.getElementById("job-link-"+e.job.id);var f=b.parentElement;var h=document.getElementById("job-"+e.job.id);var p=function(){if(b===n)return false;if(n!=null)n.classList.remove("active");if(i!=null)i.classList.remove("active");if(r)r.detach();f.classList.add("active");h.classList.add("active");if(s!=null)s.attach();n=f;i=h;r=s;return false};b.onclick=p;if(n==null)p()};for(var a=0,o=e.logs;a<o.length;a++){var c=o[a];s(c)}}}};t.pages["url"]={build:function(n){var i=n["url"];return e(i).then(function(e){var n=e.responseText;var r=t.Packets.parse(n);if(r.exists){return{url:i,success:true,lines:r}}else{return{url:i,success:false,fetched:true}}},function(t){return r(t,{url:i})})},title:function(t){return"URL "+t.url+" | howl.ci"},after:function(e){if(e.success&&e.lines){var n=t.Terminal.TerminalData.empty();var r=e.lines.lines;var i=new Array(r.length);for(var s=0;s<r.length;s++){var a=r[s];n=i[s]=n.handlePacket(a.command,a.data)}var o=new t.Terminal.TerminalControl(0,r,i);o.attach()}}}})(e||(e={}));"use strict";var r=window.location.search.substring(1).split("&").map(function(t){return t.split("=",2).map(decodeURIComponent)});var i={};for(var s=0,a=r;s<a.length;s++){var o=a[s],c=o[0],u=o[1];i[c]=u}var l=i["p"]||"index";var b=e.pages[l];if(!b){l="error";b=e.pages["error"]}b.build(i).then(function(t){if(!t)t={};t.page=l;document.title=b.title(t);document.getElementById("content").innerHTML=e.templates[l].render(t,e.templates);if(b.after)b.after(t)},function(t){var e=String(t);if(t instanceof Error)e=t.stack;e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;");document.title="Error | Howl.CI";document.getElementById("content").innerHTML="<h2>Error in Error handling</h2><pre>"+e+"</pre>"});